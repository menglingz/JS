<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      * {
        padding: 0;
        margin: 0;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -o-user-select: none;
      }

      ul,
      ol,
      li {
        list-style: none;
      }

      #srcoll {
        width: 500px;
        height: 600px;
        margin: 0 auto;
        position: relative;
        background-color: bisque;
        overflow: hidden;
      }

      #scroll-content {
        padding-left: 10px;
        position: absolute;
        left: 0;
        top: 0;
      }

      #scroll-content li {
        height: 30px;
        line-height: 30px;
      }

      #scroll-box {
        width: 10px;
        position: absolute;
        right: 0;
        height: 600px;
        background-color: chartreuse;
      }

      #scroll-box span {
        position: absolute;
        width: 10px;
        height: 20px;
        right: 0;
        background-color: red;
        border-radius: 10px;
      }
    </style>
  </head>
  <body style="height: 3000px">
    <div id="srcoll">
      <div id="scroll-content">
        <ul>
          <li>你好啊123456789</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊</li>
          <li>你好啊wertyuiop[</li>
        </ul>
      </div>
      <div id="scroll-box">
        <span></span>
      </div>
    </div>

    <script>
      var scroll = document.getElementById('srcoll') // 内容的可视区域
      var scrollContent = document.getElementById('scroll-content') // 内容大区域
      var scrollBox = document.getElementById('scroll-box') // 轨道
      var span = document.getElementsByTagName('span')[0] // 滑块
      var spanTop = null

      span.addEventListener('mousedown', function (e) {
        var e = e || window.event
        var y = e.clientY - this.offsetTop

        document.onmousemove = function (e) {
          var e = e || window.event

          spanTop = e.clientY - y
          if (spanTop < 0) spanTop = 0
          if (spanTop > scrollBox.offsetHeight - span.offsetHeight) spanTop = scrollBox.offsetHeight - span.offsetHeight

          span.style.top = spanTop + 'px'

          // 设置内容滚动距离
          var ration = (scrollContent.offsetHeight - srcoll.offsetHeight) / (scrollBox.offsetHeight - span.offsetHeight)
          scrollContent.style.top = -ration * spanTop + 'px'
        }

        document.onmouseup = function () {
          document.onmousemove = document.onmouseup = null
        }
      })

      scroll.addEventListener('mousewheel', function (e) {
        var e = e || window.event
        // 根据滚轮信息 判断是向上还是向下滚动
        move(e)
      })

      function move(e) {
        e.preventDefault ? e.preventDefault() : (e.returnValue = false)
        if (wheelEvent(e) > 0) {
          spanTop -= 5
        } else {
          spanTop += 5
        }

        // 控制范围
        // 上部固定
        if (spanTop <= 0) spanTop = 0
        // 下部固定
        var maxTop = scrollBox.offsetHeight - span.offsetHeight
        if (spanTop >= maxTop) spanTop = maxTop
        // 赋值
        span.style.top = spanTop + 'px'

        var ration = (scrollContent.offsetHeight - srcoll.offsetHeight) / (scrollBox.offsetHeight - span.offsetHeight)
        scrollContent.style.top = -ration * spanTop + 'px'
      }

      // 滚轮信息
      function wheelEvent(e) {
        if (e.wheelDelta) {
          return e.wheelDelta
        } else {
          return e.detail * -50
        }
      }
    </script>
  </body>
</html>
